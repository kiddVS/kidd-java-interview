# Java内存区域
## 1、概述
* 由于JAVA的内存管理机制，导致不需要像C/C++一样手动申请和释放内存。大大降低了内存泄漏和内存溢出的风险，但是如果一旦出现问题，如果不了解虚拟机是怎么工作的，将很难定位问题。
## 2、运行时数据区域
 ![运行时数据区域](https://user-gold-cdn.xitu.io/2018/4/27/16306a34cd8a4354?w=513&h=404&f=png&s=132068)
* 运行时区域主要包括 堆区、方法区（非堆）、虚拟机栈、本地方法栈、程序计数器五个部分：
* 其中线程私有的包括程序计数器、虚拟机栈、本地方法栈，各线程共享的包括堆Heap和非堆（方法区）
    
    * 1、程序计数器：（1）字节码运行到哪一行的计数记录，字节码解释器通过该行号来控制代码执行。（2）多线程运行条件下，通过该行号来定位被唤醒的线程应该从哪里开始执行。 所以每一个线程都必须拥有一个程序计数器。
    * 2、Java虚拟机栈，即线程栈，保存着本地变量以及对象引用。虚拟机栈随着线程开启而启动，随着线程终止而销毁。虚拟机栈会引发StackOverflowError(栈的深度超过了限制的深度，很有可能是方法递归调用的原因)和OutOfMemoryError（栈内存超过JVM规定内存）
    * 3、本地方法栈，虚拟机栈是虚拟机调用JAVA方法（字节码）服务，而本地方法是为执行native方法服务。HotSpot虚拟机将虚拟机栈和本地方法栈合二为一了。
    * 4、堆Heap，这是整个内存区域最大的部分，存放着所有的对象和**数组**，也是GC回收垃圾的主要区域。GC主要分为新生代和老年代，新生代分为Eden区和两个Survivor区。JDK1.8之前还有永久代，之后移除永久代，用元空间取代。
    * 5、方法区（非堆），各线程共享的内存区域，保存类的元信息（常量、静态变量、**JIT编译器编译后的代码**）。
    * 6、